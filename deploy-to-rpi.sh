#!/bin/bash

echo "ğŸ“ GainTempsIA - DÃ©ploiement sur Raspberry Pi"
echo "=============================================="
echo ""
echo "ğŸ“ Ã‰TAPES Ã€ SUIVRE :"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "1ï¸âƒ£  POUSSER SUR GITHUB (sur votre Mac)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "cd /Users/duhaz/projets/gaintemps-ia"
echo "git remote add origin https://github.com/VOTRE-USERNAME/gaintemps-ia.git"
echo "git branch -M main"  
echo "git push -u origin main"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "2ï¸âƒ£  SUR VOTRE RASPBERRY PI"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "# Mettre Ã  jour le systÃ¨me"
echo "sudo apt update && sudo apt upgrade -y"
echo ""
echo "# Installer Docker"
echo "curl -fsSL https://get.docker.com -o get-docker.sh"
echo "sudo sh get-docker.sh"
echo "sudo usermod -aG docker \$USER"
echo ""
echo "# RedÃ©marrer la session ou le RPi"
echo "sudo reboot"
echo ""
echo "# AprÃ¨s redÃ©marrage, cloner le projet"
echo "git clone https://github.com/VOTRE-USERNAME/gaintemps-ia.git"
echo "cd gaintemps-ia/api"
echo ""
echo "# Configurer l'API"
echo "cp .env.example .env"
echo "nano .env  # Ajoutez votre clÃ© Resend"
echo ""
echo "# Construire et lancer"
echo "docker compose build"
echo "docker compose up -d"
echo ""
echo "# VÃ©rifier que Ã§a marche"
echo "docker compose logs -f"
echo "curl http://localhost:3000/health"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "3ï¸âƒ£  TESTER L'API"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "# Depuis un autre ordinateur sur votre rÃ©seau :"
echo "curl http://IP-DU-RPI:3000/health"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“– Documentation complÃ¨te : cat RASPBERRY-PI.md"
echo ""
echo "ğŸ’¡ Astuces :"
echo "   - La compilation sur RPi prend 5-10 minutes"
echo "   - Raspberry Pi 4 avec 4GB RAM recommandÃ©"
echo "   - L'image Docker est compatible ARM64/ARM32"
echo ""
echo "ğŸ¯ Une fois l'API fonctionnelle sur le RPi, vous pourrez :"
echo "   - Installer Caddy pour servir le frontend"
echo "   - Configurer un nom de domaine"
echo "   - Ouvrir les ports sur votre routeur"
echo ""
echo "Bon dÃ©ploiement ! ğŸš€"
